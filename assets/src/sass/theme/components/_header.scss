@use "sass:math";
@use "../shared" as *;
@use "../base/typography" as typo;

/* HEADER */
/* CSS relativo alla sezione header / menu */
.navigation {
  &.navigation-desktop {
    display: flex;
    @include media-breakpoint-down(md) {
      display: none;
    }
  }
  &.navigation-mobile {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: $spacer-sm * 3;
    flex-direction: column;
    justify-content: center; // Changed from space-between for vertical centering
    flex-wrap: wrap;
    background-color: $color-primary;
    opacity: 0;
    pointer-events: none;
    // transition: opacity 0.15s linear; // Removed for instant appearance
    z-index: 2000;
    @include media-breakpoint-down(md) {
      display: flex;
    }
    &.visible {
      opacity: 1;
      pointer-events: all;
      position: fixed;
      z-index: 2000;
    }
    .navigation-mobile-flexbox {
      flex-direction: column;
      align-items: center;
      justify-content: center;
      // flex-wrap: wrap;
      min-width: 100%;
      display: flex;
      flex: 1; // Ensure it takes available space to center effectively
    }
    .accordion__item {
      margin: 1.5vh 0; // Dynamic vertical margin
      width: fit-content;
      .title_link {
        width: fit-content; // Changed from 70vw to fit content
        text-align: center;
        display: inline-block;
        padding: 1vh 4vw; // Reduced padding
        font-size: clamp(20px, 4vw, 32px); // Reduced font size
        @include typo.font-bold; 
        color: $color-white; 
        background-color: $color-theme;
        //border-radius: 100vw;
        &.ismobile {
          color: $color-black; // Keep black for ismobile specific case if needed, or check if this should override. Assuming ismobile class might need review, but user asked for "tasti del menu mobile".
          // If "ismobile" class is used for something specific inside mobile menu, maybe keep it or update it?
          // The user said "tasti del menu mobile ... bianco".
          // Let's assume the main links need to be white.
          // If .ismobile is a specific variant, I will leave it as is for now unless it conflicts.
          background-color: $color-yellow;
        }
      }
    }
  }
}

.logotype {
  margin: 0;
  display: inline-flex;
  align-items: center;
  font-family: "GTL Trame 1", sans-serif;
  font-weight: 200;
  font-variation-settings: "wght" 200;
  
  .logotype-initial {
    // Inherits font settings from parent
  }

  .logotype-rest {
    // Inherits font settings from parent
    display: none;
  }
}

.logotype_container:hover .logotype-rest {
  display: inline;
}

// Force black color on hover with high specificity to override generic * selector
.site-header .site-header-inner .logotype_container a:hover,
.site-header .site-header-inner .logotype_container a:hover * {
  color: $color-black !important;
}

// Mobile Logotype Styles
.mobile-header-bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  // padding and min-height are inherited from .site-header-inner
  background-color: transparent !important; // Override .site-header-inner background
  // display: flex; // inherited
  // align-items: center; // inherited
  z-index: 2002;
  border-bottom: none !important; // Just in case
}

.mobile-logotype {
  margin: 0; 
  
  .logotype {
    color: $color-black !important;
    
    .logotype-rest {
      display: inline !important;
    }
  }

  a {
    text-decoration: none;
    
    &:hover {
      .logotype {
        color: $color-black !important;
      }
    }
  }
}

.navbar-toggler {
  border: none;
  position: relative;
  background-color: transparent; // Changed to transparent
  padding: 0;
  cursor: pointer;
  top: unset;
  height: 40px;
  width: 40px;
  display: none;
  z-index: 2001;
  font-family: "Trame-Menu"; // Custom font Trame-Menu
  font-weight: 400; 
  font-style: normal;
  font-size: 40px; 
  line-height: 1;
  color: $color-black;

  @include media-breakpoint-down(md) {
    display: flex; // Use flex for centering
    align-items: center;
    justify-content: center;
  }

  .icon-bar {
    display: none; 
  }

  // Icons using pseudo-elements
  &::before {
    content: 'd'; 
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    
    // Variable font transition settings
    font-variation-settings: "wght" 0; // Default (Open/Close icon state - wght 0)
    transition: font-variation-settings 0.3s ease;
  }

  &::after {
    display: none; // Remove 'k'
  }

  // State: Closed (Hamburger - wght 200)
  &.closed {
    &::before {
      font-variation-settings: "wght" 200; // Closed state
    }
  }
}
.site-header {
  position: sticky;
  top: 0;
  z-index: 300;
  width: auto;
  padding: 0;
  border-bottom: 0;
  .site-header-inner {
    display: flex;
    justify-content: space-between;
    width: 100%;
    background-color: $color-white;
    padding: $spacer;
    min-height: 66px !important;
    @include media-breakpoint-up(xl) {
      min-height: 75px !important;
    }
    @include media-breakpoint-down(md) {
      min-height: 50px !important;
    }

    @include media-breakpoint-down(md) {
      align-items: center;
      padding: 9px;
    }
    * {
      color: $color-black;
      transition: all 0.3s;
    }
    a,
    svg {
      display: inline-block;
      svg,
      img {
        object-fit: cover;
        max-width: 100px;
        max-height: 100px;
        @include media-breakpoint-down(md) {
          height: $spacer-sm * 5;
        }
      }
      &:hover {
        * {
          color: $color-hover !important;
          transition: all 0.3s;
        }
      }
    }
    .navigation {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      position: relative;
      padding-right: 0;
      @include media-breakpoint-up(xl) {
        padding-right: 0;
      }
      @include media-breakpoint-down(md) {
        padding-right: 0;
      }
      &.navigation-desktop {
        @include media-breakpoint-down(md) {
          display: none;
        }
      }
      .accordion__item {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        .title_link {
          @include typo.extrasmall;
          //@include typo.button;
          display: inline-block;
          padding: 6px 8px;
          font-weight: 700;
          background-color: $color-white;
          color: $color-black;
          margin-left: 6px;
          //border: 2px solid $color-black;
          &:hover {
            background-color: $color-hover;
            color: $color-white;
          }
          &.active {
            background-color: $color-hover!important;
            color: $color-white!important;
          }
        }
      }
    }
  }
}

// Custom styles for language switcher
.language-link {
  font-family: 'Grid'; 
  font-variation-settings: 'wght' 1000;
  text-decoration: none !important;
  color: $color-black !important;
  background-color: transparent !important;
  
  &:hover,
  &.active {
    background-color: transparent !important;
    color: $color-black !important;
    font-variation-settings: "wght" 0, "BACK" 600, "SHAP" 200 !important;
  }
}

// Container styles for mobile language switcher
.mobile-languages {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: $spacer*3;
  font-size: $large-sm;
}
